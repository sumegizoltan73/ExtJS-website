Ext.define("Web.controller.MenuPartial",{extend:"Web.controller.AbstractController",stores:["MenuItems","LocationParams"],models:["MenuItem","LocationParam"],views:["shared.MenuPartial"],init:function(){this.control({menupartial:{render:this.onMenuRendered}})},onMenuRendered:function(c){var d,j,l,e,k,b,h,a,i,f,g;d=this.getApplication().lang;this.getMenuItemsStore().clearFilter(true);this.getMenuItemsStore().filter("lang",d);g=this.getLocationParamsStore();g.clearFilter(true);g.filter("lang",d);this.getMenuItemsStore().each(function(m,n){h=null;j=this.get("iconCls");l=this.get("text");e=this.get("action");if(e){f=g.findRecord("view",e);if(!f){if(console){console.log(this.modelErrMsg)}k=e}else{k=f.get("localizedViewParam")}b=Ext.String.format("?view={0}&lang={1}",k,d)}else{a=this.get("url")||"#";if(this.get("urlHasLangParam")===true){a+=(/\?/.test(a))?"&":"?";a+="lang="+d}b=a;h=this.get("urlTarget")}i={text:Ext.String.format('<i class="fa {0}"></i><span>{1}</span>',j,l),href:b};if(h){i.hrefTarget=h}c.add(i)});c.show()}});