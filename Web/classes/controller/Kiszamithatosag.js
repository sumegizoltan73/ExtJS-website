Ext.define("Web.controller.Kiszamithatosag",{extend:"Ext.app.Controller",stores:["Article","Price","Category"],models:["Article"],views:["kiszamithatosag.View"],init:function(){this.control({"contentpartial panel[name=kiszamithatosagContent]":{render:this.onContentRendered},"contentfooterpartial panel[name=kiszamithatosagContentFooter]":{render:this.onContentFooterRendered}})},onContentRendered:function(a){Ext.Web.Util.createArticles(a,this.getArticleStore(),{filterFn:function(b){return/kiszamithatosag|all/.test(b.get("view"))&&b.get("target")==="content"},itemCallback:[{test:function(b){return/price/.test(b.get("name"))},fn:Ext.bind(this.onPriceRendered,this)},{test:function(b){return/category/.test(b.get("name"))},fn:Ext.bind(this.onCategoryRendered,this)}]})},onPriceRendered:function(a){var b;a.children=[];a.children.push({tag:"table",children:[{tag:"thead",children:[{tag:"tr",children:[{tag:"th",html:"Munkák (pl.)"},{tag:"th",html:"Tervezett díj"}]}]}]});b=Ext.Web.Util.createArticles({tag:"tbody"},this.getPriceStore(),{filterFn:function(c){return true},tagArticleContainer:"tr",clsArticleContainer:false,tagTitle:"td",tagHtml:"td",isArticleItemsAsChildren:true});a.children[0].children.push(b);return a},onCategoryRendered:function(a){var b;a.children=[];a.children.push({tag:"table",children:[{tag:"thead",children:[{tag:"tr",children:[{tag:"th",html:"Hatósági közvetítői tevékenységi kör (ebben az oszlopban)"}]}]}]});b=Ext.Web.Util.createArticles({tag:"tbody"},this.getCategoryStore(),{filterFn:function(c){return true},tagArticleContainer:"tr",clsArticleContainer:false,tagHtml:"td",isArticleItemsAsChildren:true});a.children[0].children.push(b);return a},onContentFooterRendered:function(a){Ext.Web.Util.createArticles(a,this.getArticleStore(),{filterFn:function(b){return/kiszamithatosag|all/.test(b.get("view"))&&b.get("target")==="content-footer"}})}});